<?php $this->headTitle('Accounts'); ?>

<?php if ($this->userAccess('user_create')) { ?>
<p><a href="<?php echo $this->url('account/create'); ?>">New User</a></p>
<?php } ?>

<?php if (count($accounts)) { ?>
    <ul>
        <?php foreach ($accounts as $account) { ?>
            <li>
                <h2>
                    <?php if ($this->userAccess('user_update')) { ?>
                        <a href="<?php echo $this->url('account/update', array('id' => $account->getId())); ?>">
                    <?php } ?>
                        <?php echo $this->userDisplayName($account); ?>
                    <?php if ($this->userAccess('user_update')) { ?>
                        </a>
                    <?php } ?>
                </h2>

                <p>
                    <?php echo $account->getIdentity(); ?>
                </p>

                <?php if ($this->userAccess('user_delete') && $account->getId() != $this->userIdentity()->getId()) { ?>
                    <ul>
                        <li><a href="<?php echo $this->url('account/delete', array('id' => $account->getId())); ?>">Remove</a></li>
                    </ul>
                <?php } ?>
            </li>
        <?php } ?>
    </ul>
<?php } else { ?>
    <p>There are no users yet, would you like to create one?</p>
<?php } ?>

<?php if ($this->userAccess('user_create')) { ?>
<p><a href="<?php echo $this->url('account/create'); ?>">New User</a></p>
<?php } ?>